{"version":3,"sources":["components/Filter.js","services/persons.js","components/PersonForm.js","components/Person.js","components/Persons.js","components/Notification.js","App.js","index.js"],"names":["Filter","value","setValue","onChange","e","target","baseUrl","personService","getAll","axios","get","then","resp","data","addPerson","newPerson","post","updatePerson","id","put","deletePerson","delete","PersonForm","persons","setPersons","setMessage","useState","newName","setNewName","newNumber","setNewNumber","onSubmit","event","preventDefault","found","find","person","name","successCallback","text","type","setTimeout","number","window","confirm","returnedPerson","map","p","catch","error","response","status","filter","console","log","concat","err","Person","onClick","Persons","useEffect","search","RegExp","Notification","className","App","keyword","setKeyword","message","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.bdfbacb3.chunk.js","sourcesContent":["const Filter = ({value, setValue}) => (\n  <div>\n    filter shown with <input value={value} onChange={e => setValue(e.target.value)}/>\n  </div>\n)\n\nexport default Filter\n","import axios from \"axios\";\n\nconst baseUrl = \"/api/persons\"\n\nconst getAll = () => {\n  return axios.get(baseUrl).then(resp => resp.data)\n}\n\nconst addPerson = (newPerson) => {\n  return axios.post(baseUrl, newPerson).then(resp => resp.data)\n}\n\nconst updatePerson = (id, newPerson) => {\n  return axios.put(`${baseUrl}/${id}`, newPerson)\n}\n\nconst deletePerson = id => {\n  return axios.delete(`${baseUrl}/${id}`)\n}\n\nconst personService = {\n  getAll,\n  addPerson,\n  updatePerson,\n  deletePerson\n}\n\nexport default personService\n","import React, {useState} from 'react'\n\nimport personService from '../services/persons'\n\nconst PersonForm = ({persons, setPersons, setMessage}) => {\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n\n  const handleSubmit = (event) => {\n    event.preventDefault()\n    // 查找是不是有重复的人\n    const found = persons.find(person => person.name === newName)\n    const successCallback = () => {\n      setNewName('')\n      setNewNumber('')\n      setMessage({\n        text: `Added ${newName}`,\n        type: 'success'\n      })\n      // 5 秒后清除消息\n      setTimeout(() => setMessage({text: '', type: ''}), 5000)\n    }\n\n    if (found) {\n      // 有则修改\n      const id = found.id\n      const newPerson = {\n        name: found.name,\n        number: newNumber\n      }\n\n      if (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)) {\n        personService.updatePerson(id, newPerson).then(resp => {\n          const returnedPerson = resp.data\n          setPersons(persons.map(p => p.id !== id ? p : returnedPerson))\n          successCallback()\n        }).catch(error => {\n          if (error.response.status === 404) {\n            setPersons(persons.filter(p => p.id !== newPerson.id))\n            setMessage({\n              text: `Information of ${newName} has already been removed from server`,\n              type: 'error'\n            })\n            setTimeout(() => setMessage({text: '', type: ''}), 5000)\n          }\n          if (error.response.status === 400) {\n            console.log(error.response)\n            const data = error.response.data\n            setMessage({\n              text: data.error,\n              type: 'error'\n            })\n            setTimeout(() => setMessage({text: '', type: ''}), 5000)\n          }\n        })\n      }\n    } else {\n      // 没有则新增\n      const newPerson = {\n        name: newName,\n        number: newNumber\n      }\n\n      personService.addPerson(newPerson)\n        .then(returnedPerson => {\n          setPersons(persons.concat(returnedPerson))\n          successCallback()\n        })\n        .catch(err => {\n          const data = err.response.data\n          setMessage({\n            text: data.error,\n            type: 'error'\n          })\n          setTimeout(() => setMessage({text: '', type: ''}), 5000)\n        })\n    }\n  }\n\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <div>name: <input value={newName} onChange={e => setNewName(e.target.value)}/></div>\n      <div>number: <input value={newNumber} onChange={e => setNewNumber(e.target.value)}/></div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  )\n}\n\n\nexport default PersonForm\n","const Person = ({ person, deletePerson }) => (\n  <div>\n    {person.name} {person.number} <button onClick={deletePerson}>delete</button>\n  </div>\n)\n\nexport default Person\n","import React, { useEffect } from 'react'\n\nimport Person from './Person'\nimport personService from '../services/persons'\n\nconst Persons = ({ persons, filter, setPersons }) => {\n\n  useEffect(() => {\n    personService.getAll().then(persons => {\n      setPersons(persons)\n    })\n  }, [setPersons])\n\n  const deletePerson = person => {\n    if (window.confirm(`Delete ${person.name} ?`)){\n      personService.deletePerson(person.id).then(resp => {\n        setPersons(persons.filter(p => person.id !== p.id))\n      })\n    }\n  }\n\n  return (\n    <div>\n      {\n        persons\n          .filter(person => person.name.search(new RegExp(filter, 'i')) !== -1)\n          .map(person => <Person key={person.id} person={person} deletePerson={() => deletePerson(person)}/>)\n      }\n    </div>\n  );\n}\n\nexport default Persons\n","import './Notification.css'\n\nconst Notification = ({text, type}) => {\n  if (text === '') {\n    return null\n  }\n\n  let className = 'message'\n  if (type === 'success') {\n    className += ' success'\n  } else if (type === 'error') {\n    className += ' error'\n  }\n\n  return (\n    <div className={className}>\n      {text}\n    </div>\n  )\n}\n\nexport default Notification\n","import React, { useState } from 'react'\n\nimport Filter from './components/Filter'\nimport PersonForm from './components/PersonForm'\nimport Persons from './components/Persons'\nimport Notification from './components/Notification'\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [keyword, setKeyword] = useState('')\n  const [message, setMessage] = useState({text: '', type: ''})\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification text={message.text} type={message.type}/>\n      <Filter value={keyword} setValue={setKeyword}/>\n      <h3>add a new</h3>\n      <PersonForm persons={persons} setPersons={setPersons} setMessage={setMessage}/>\n      <h3>Numbers</h3>\n      <Persons persons={persons} filter={keyword} setPersons={setPersons}/>\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App'\n\nReactDOM.render(\n  <App/>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}